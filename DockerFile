# Builder stage
FROM python:3.10-slim as builder

# Set working directory
WORKDIR /app

# Copy requirements.txt
COPY requirements.txt .

# Install dependencies
RUN pip install --no-cache-dir -r requirements.txt

# Copy the rest of the application files
COPY . .

# Test stage
FROM builder as tester

COPY --from=builder /app .

WORKDIR /app/main

# Run tests
#CMD ["pytest", "*"]

#RUN python3 -m pytest *
#-v -o junit_family=xunit1 \
#    --cov=../../main --cov-report xml:../test-results/coverage-cpu.xml \
#    --cov-report html:../test-results/cov_html-cpu \
#    --junitxml=../test-results/results-cpu.xml'

# File structur çıkart
#Testleri çalıştır
